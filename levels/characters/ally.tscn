[gd_scene load_steps=26 format=3 uid="uid://boxlgobc2bmf1"]

[ext_resource type="Script" path="res://scripts/ally.gd" id="1_fkmo4"]
[ext_resource type="Script" path="res://ressources/DisplayDamageHurtEffectResource.gd" id="2_bho8y"]
[ext_resource type="PackedScene" uid="uid://drqndqsdbxxc7" path="res://components/HurtboxComponent.tscn" id="2_wolpn"]
[ext_resource type="PackedScene" uid="uid://beiqnyl0bmd58" path="res://levels/props/money.tscn" id="3_emxrf"]
[ext_resource type="PackedScene" uid="uid://donmb7syeemi1" path="res://components/HealthComponent.tscn" id="3_lbnhk"]
[ext_resource type="ArrayMesh" uid="uid://d26nf0bb7q6fc" path="res://levels/props/cart.obj" id="3_lfvrd"]
[ext_resource type="PackedScene" uid="uid://chpsfjftfdckn" path="res://components/LifebarComponent.tscn" id="4_s2l8j"]

[sub_resource type="BoxShape3D" id="BoxShape3D_8ntli"]
size = Vector3(1.5, 0.75, 1.5)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_0y6r0"]
albedo_color = Color(0.490196, 0.486275, 0, 1)

[sub_resource type="PlaneMesh" id="PlaneMesh_likg2"]
size = Vector2(1, 1.3)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_sre4l"]
albedo_color = Color(0.3795, 0.456225, 0.55, 1)

[sub_resource type="FastNoiseLite" id="FastNoiseLite_8dlvn"]
seed = 1

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_twln4"]
width = 1024
noise = SubResource("FastNoiseLite_8dlvn")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_0mkts"]
albedo_color = Color(0.521569, 0.521569, 0.521569, 1)
albedo_texture = SubResource("NoiseTexture2D_twln4")

[sub_resource type="CylinderMesh" id="CylinderMesh_cbjgk"]
top_radius = 0.2
bottom_radius = 0.2
height = 0.2

[sub_resource type="Animation" id="Animation_cyybh"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("MeshInstance3D3:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0.156705, -3.12588, -1.59174)]
}

[sub_resource type="Animation" id="Animation_0vfbh"]
resource_name = "drive"
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("MeshInstance3D4:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(0, 0, 1.5708), Vector3(6.28319, 0, 1.5708)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("MeshInstance3D5:rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 1),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(0, 0, 1.5708), Vector3(6.28319, 0, 1.5708)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("MeshInstance3D6:rotation")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 1),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(0, 0, 1.5708), Vector3(6.28319, 0, 1.5708)]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("MeshInstance3D3:rotation")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0, 1),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(0, 0, 1.5708), Vector3(6.28319, 0, 1.5708)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_huvow"]
_data = {
"RESET": SubResource("Animation_cyybh"),
"roll": SubResource("Animation_0vfbh")
}

[sub_resource type="Animation" id="Animation_5qcql"]
resource_name = "hurt"
length = 0.6
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.2, 0.4, 0.6),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 0,
"values": [Vector3(0, 0, 0), Vector3(0, 0.3, 0), Vector3(0, 0, 0), Vector3(0, 0, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath(".:rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.2, 0.4, 0.6),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 0,
"values": [Vector3(0, 0, 0), Vector3(0, 0, 0.139626), Vector3(0, 0, -0.139626), Vector3(0, 0, 0)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("gold:position")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 0.3, 0.5),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector3(0, -0.0443386, 0), Vector3(0, 0.2, 0), Vector3(0, 0, 0)]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("gold:rotation")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0, 0.4, 0.6),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector3(0, 0, 0.00243047), Vector3(0, 0.00349066, 0.0349066), Vector3(0, 0, 0)]
}

[sub_resource type="Animation" id="Animation_rj61x"]
resource_name = "idle"
length = 0.6
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("gold:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.3, 0.6),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector3(0, 0, 0), Vector3(0, 0, 0.0523599), Vector3(0, 0, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath(".:rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.2, 0.4, 0.6),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 0,
"values": [Vector3(0, 0, 0.00788037), Vector3(0, 0, 0.0349066), Vector3(0, 0, -0.0349066), Vector3(0, 0, 0.0126626)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("gold/MeshInstance3D7:position")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 0.3, 0.6),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector3(-0.245985, 0.245531, -0.0549833), Vector3(-0.25, 0.26, -0.055), Vector3(-0.245985, 0.245531, -0.0549833)]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("gold/MeshInstance3D12:position")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0.3, 0.6),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(0.24, 0.25, 0.4), Vector3(0.246952, 0.24208, 0.397531)]
}
tracks/4/type = "value"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("gold/MeshInstance3D10:position")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(0.3, 0.6),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(0.3, 0.3, -0.374), Vector3(0.297398, 0.281607, -0.374018)]
}
tracks/5/type = "value"
tracks/5/imported = false
tracks/5/enabled = true
tracks/5/path = NodePath("gold/MeshInstance3D9:position")
tracks/5/interp = 1
tracks/5/loop_wrap = true
tracks/5/keys = {
"times": PackedFloat32Array(0.3, 0.6),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(-0.12, 0.23, -0.468), Vector3(-0.100692, 0.212184, -0.468234)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_e5u6g"]
_data = {
"hurt": SubResource("Animation_5qcql"),
"idle": SubResource("Animation_rj61x")
}

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_5sis8"]
animation = &"hurt"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_aoy35"]
animation = &"idle"

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_85vef"]
mix_mode = 1
fadein_time = 0.01
fadeout_time = 0.01

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_0nj0x"]
graph_offset = Vector2(-410, 76)
nodes/Animation/node = SubResource("AnimationNodeAnimation_aoy35")
nodes/Animation/position = Vector2(-340, 120)
"nodes/Animation 2/node" = SubResource("AnimationNodeAnimation_5sis8")
"nodes/Animation 2/position" = Vector2(-300, 300)
nodes/hurt/node = SubResource("AnimationNodeOneShot_85vef")
nodes/hurt/position = Vector2(60, 140)
node_connections = [&"output", 0, &"hurt", &"hurt", 0, &"Animation", &"hurt", 1, &"Animation 2"]

[node name="AllyCharacterBody3D" type="CharacterBody3D" groups=["allies"]]
collision_layer = 257
collision_mask = 257
script = ExtResource("1_fkmo4")
hurt_effects = Array[Resource]([ExtResource("2_bho8y")])

[node name="HurtboxComponent" parent="." instance=ExtResource("2_wolpn")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.283189, 0)
shape = SubResource("BoxShape3D_8ntli")

[node name="HealthComponent" parent="." instance=ExtResource("3_lbnhk")]

[node name="LifebarComponent" parent="." instance=ExtResource("4_s2l8j")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.54783, 0)
visible = false

[node name="cart" type="Node3D" parent="."]
transform = Transform3D(0.999946, -0.0104276, 0, 0.0104276, 0.999946, 0, 0, 0, 1, 0, 0, 0)

[node name="body" type="Node3D" parent="cart"]
transform = Transform3D(0.999907, -0.0136594, 0, 0.0136594, 0.999907, 0, 0, 0, 1, 0, 0, 0)

[node name="gold" type="Node3D" parent="cart/body"]
transform = Transform3D(0.999971, -0.00746461, 0, 0.00746461, 0.999971, 0, 0, 0, 1, 0, 0, 0)

[node name="MeshInstance3D7" parent="cart/body/gold" instance=ExtResource("3_emxrf")]
transform = Transform3D(0.122803, -0.895247, 0.919115, 0.278766, 0.335256, -0.693433, 0.0354428, 0.465008, 2.26945, -0.246557, 0.247594, -0.0549857)
skeleton = NodePath("../../../..")

[node name="MeshInstance3D12" parent="cart/body/gold" instance=ExtResource("3_emxrf")]
transform = Transform3D(-1.16091e-08, -0.920637, 1.2724, 0.291284, 0.166253, 0.68933, -0.0959216, 0.50486, 2.09328, 0.245961, 0.243209, 0.397883)
skeleton = NodePath("../../../..")

[node name="MeshInstance3D11" parent="cart/body/gold" instance=ExtResource("3_emxrf")]
transform = Transform3D(-0.0225021, 1.09724, 0.00720271, -0.317201, -0.0778276, -0.00853904, -0.000966797, -0.00325275, 2.63398, 0.212076, 0.212184, -0.0548583)
skeleton = NodePath("../../../..")

[node name="MeshInstance3D8" parent="cart/body/gold" instance=ExtResource("3_emxrf")]
transform = Transform3D(-0.0883596, 0.645053, 1.8852, -0.277027, -0.455984, 0, 0.0974471, -0.711394, 1.7094, -0.208823, 0.212184, 0.353518)
skeleton = NodePath("../../../..")

[node name="MeshInstance3D9" parent="cart/body/gold" instance=ExtResource("3_emxrf")]
transform = Transform3D(-0.0165245, 0.743417, 1.81387, -0.275228, -0.368734, 0.693372, 0.134253, -0.664426, 1.64472, -0.103445, 0.214724, -0.468201)
skeleton = NodePath("../../../..")

[node name="MeshInstance3D10" parent="cart/body/gold" instance=ExtResource("3_emxrf")]
transform = Transform3D(-0.0883596, 0.645053, 1.8852, -0.277027, -0.455984, 4.39228e-07, 0.0974471, -0.711394, 1.7094, 0.297769, 0.284229, -0.374015)
skeleton = NodePath("../../../..")

[node name="MeshInstance3D13" type="MeshInstance3D" parent="cart/body"]
transform = Transform3D(1, 4.65661e-09, 0, -4.65661e-09, 1, 0, 0, 0, 1, 8.14907e-10, 0.113923, 0)
material_override = SubResource("StandardMaterial3D_0y6r0")
mesh = SubResource("PlaneMesh_likg2")
skeleton = NodePath("../../..")

[node name="MeshInstance3D" type="MeshInstance3D" parent="cart/body"]
transform = Transform3D(0.5, 2.32831e-09, 0, -2.32831e-09, 0.5, 0, 0, 0, 0.5, -3.0268e-09, -0.283189, 0)
material_override = SubResource("StandardMaterial3D_sre4l")
mesh = ExtResource("3_lfvrd")
skeleton = NodePath("../../..")

[node name="wheels" type="Node3D" parent="cart"]
transform = Transform3D(0.999848, 0.0174524, 0, -0.0174524, 0.999848, 0, 0, 0, 1, 0, 0, 0)

[node name="MeshInstance3D3" type="MeshInstance3D" parent="cart/wheels"]
transform = Transform3D(0.0233911, -0.999606, -0.0155195, -0.98753, -0.0206855, -0.156064, 0.155682, 0.0189765, -0.987625, 0.773223, -0.650567, 0.576118)
material_override = SubResource("StandardMaterial3D_0mkts")
mesh = SubResource("CylinderMesh_cbjgk")
skeleton = NodePath("../../..")

[node name="MeshInstance3D4" type="MeshInstance3D" parent="cart/wheels"]
transform = Transform3D(-3.61999e-06, -1, 0, -0.309018, 1.11864e-06, -0.951056, 0.951056, -3.44281e-06, -0.309018, 0.744099, -0.700974, -0.697875)
material_override = SubResource("StandardMaterial3D_0mkts")
mesh = SubResource("CylinderMesh_cbjgk")
skeleton = NodePath("../../..")

[node name="MeshInstance3D5" type="MeshInstance3D" parent="cart/wheels"]
transform = Transform3D(-3.61999e-06, -1, 0, -0.309018, 1.11864e-06, -0.951056, 0.951056, -3.44281e-06, -0.309018, -0.769699, -0.700974, 0.618149)
material_override = SubResource("StandardMaterial3D_0mkts")
mesh = SubResource("CylinderMesh_cbjgk")
skeleton = NodePath("../../..")

[node name="MeshInstance3D6" type="MeshInstance3D" parent="cart/wheels"]
transform = Transform3D(-3.61999e-06, -1, 0, -0.309018, 1.11864e-06, -0.951056, 0.951056, -3.44281e-06, -0.309018, -0.769699, -0.700974, -0.697875)
material_override = SubResource("StandardMaterial3D_0mkts")
mesh = SubResource("CylinderMesh_cbjgk")
skeleton = NodePath("../../..")

[node name="AnimationPlayer" type="AnimationPlayer" parent="cart/wheels"]
autoplay = "roll"
libraries = {
"": SubResource("AnimationLibrary_huvow")
}

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
root_node = NodePath("../cart/body")
reset_on_save = false
libraries = {
"": SubResource("AnimationLibrary_e5u6g")
}

[node name="AnimationTree" type="AnimationTree" parent="."]
tree_root = SubResource("AnimationNodeBlendTree_0nj0x")
anim_player = NodePath("../AnimationPlayer")
active = true
parameters/hurt/active = false
parameters/hurt/request = 0
